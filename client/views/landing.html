<div>
  <div class="landing-section">

    <div ng-repeat="space in publicSpaces"
         ng-include="'views/partials/space-thumbnail.html'"
         class="space-thumbnail">

    </div>

    <div xyz-player
         space="{{playingSpace()}}"
         ng-if="playingSpace()">

    </div>
    {{playingSpace()? playingSpace() : '' }}
  </div>
  <div ng-if="!User.loggedIn()" class="landing-section">

    <h4>join to create your own xyz space</h4>
    <form ng-submit="clearError(registerData).then(User.register).then(User.login).catch(showError)">

      <input ng-model="registerData.email" placeholder="email" type="email" required><br/>
      <input ng-model="registerData.name" placeholder="name"><br/>
      <input ng-model="registerData.password" placeholder="password" type="password" required><br/>

      <input type="submit" value="submit"/>
    </form>

    <h2>or login:</h2>
    <form ng-submit="clearError(loginData).then(User.login).then(User.fetchSpaces).catch(showError)">

      <input ng-model="loginData.email" placeholder="email" type="email" required><br/>
      <input ng-model="loginData.password" placeholder="password" type="password" required><br/>

      <input type="submit" value="submit"/>
    </form>

  </div>
  <br/>
  <hr/>
  <br/>
  <div ng-if="User.loggedIn()" class="landing-section">

    <br/>

    <ul ng-if="User.spaces">
      <h2 ng-if="User.hasSpaces()">{{User.get().name}}'s spaces:</h2>
      <li ng-repeat="space in User.spaces"
          ng-include="'views/partials/space-thumbnail.html'"
          class="space-thumbnail">

      </li>
    </ul>
      <span ng-if="!User.hasSpaces()">
        create your first space here:<br/>
      </span>

    <div ng-if="isAdding()">
      <input ng-model="newSpace.name" placeholder="new space name"></input>
      <br/>
      <button ng-click="User.addSpace(newSpace).then(resetAdding).catch(showError)">add new space</button>
    </div>
    <div ng-if="!isAdding()">
      <a ng-click="setAdding()"> + new space</a>
    </div>
    <div ng-show="isAdding()">
      <a ng-click="resetAdding()"> (nevermind)</a>
    </div>

    <br/>

  </div>


  <span ng-if="error">{{error}}</span>
</div>